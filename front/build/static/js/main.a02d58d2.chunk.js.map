{"version":3,"sources":["Components/ShowSaved.js","Components/Show.js","Components/ShowList.js","Pages/HomePage.js","Pages/UploadPage.js","Pages/LoginPage.js","Pages/RegistPage.js","Components/SearchComponent.js","Components/NavigationComponent.js","App.js","index.js"],"names":["ShowSaved","arr1","JSON","parse","localStorage","getItem","map","trip","name","location","content","tag","Show","props","className","trips","t","src","img","ShowList","useState","setTrips","useEffect","a","fetch","searchKey","response","json","res","success","fetchTrips","HomePage","UploadPage","tripInfo","setTripInfo","errorText","setErrorText","class","id","role","style","marginBottom","onSubmit","ev","preventDefault","formData","FormData","Object","entries","forEach","key","value","append","method","credentials","body","history","push","message","type","onChange","target","rows","cols","image","files","withRouter","userInfo","setUserInfo","username","password","headers","stringify","onLogin","for","to","RegistPage","setSearchKey","placeholder","aria-label","onClick","onSearch","useLocation","console","log","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","pathname","aria-current","marginLeft","hasLogin","onLogout","replace","App","setLogin","checkLogin","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a02d58d2.chunk.js","sourcesContent":["\r\n\r\nexport default function ShowSaved() {\r\n  let arr1 = JSON.parse(localStorage.getItem(\"saveTrip\"))\r\n \r\n  return arr1 ? (\r\n    <div>\r\n      {arr1.map((trip) => (\r\n        <div>\r\n          <p>{trip.name}</p>\r\n          <p>{trip.location}</p>\r\n          <p>{trip.content}</p>\r\n          <p>{trip.tag}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  ) : (\r\n    \"empty save\"\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nfunction Show (props) {\r\n\r\n    const renderTrips = () => {\r\n        // console.log(props.trips);\r\n        // if (props.trips.success)\r\n        // return props.trips.trips\r\n        return (props.trips || [])\r\n        .map((t) => (\r\n        <div>\r\n\r\n        <p>{t.name}</p>\r\n        <img src = {t.img} />\r\n        <p>{t.location}</p>\r\n        <p>{t.content}</p>\r\n\r\n\r\n        </div>))\r\n    };\r\n\r\n    return (\r\n        <div className=\"col\">\r\n            <h1>Find your favorite trips!</h1>\r\n            {renderTrips()}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nShow.propTypes = {\r\n    props: PropTypes.array,\r\n};\r\n\r\nexport default Show;","import Show from \"./Show\";\r\nimport  {useState, useEffect} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {Pagination} from \"element-react\";\r\nimport 'element-theme-default';\r\n\r\nconst ShowList =  function ShowList (props) {\r\n\r\n    const [trips, setTrips] = useState([]);\r\n   \r\n    useEffect(\r\n      () => {\r\n        const fetchTrips =  async () => {\r\n          const response = await fetch(`/getTrips?searchKey=${props.searchKey}`);\r\n          const res = await response.json();\r\n          if (res && res.success) {\r\n            setTrips(res.trips);\r\n          }\r\n        }\r\n \r\n      fetchTrips();\r\n    }, [props.searchKey]);\r\n  \r\n    // const renderData = () => trips.map((n)=> <div key={n}>Names: {n}</div>)\r\n    // const res = await resRaw.json();\r\n\r\n  return (\r\n\r\n    <Show trips={trips}/>\r\n  )\r\n\r\n}\r\n\r\nShowList.propTypes = {\r\n  searchKey: PropTypes.string\r\n};\r\n\r\nexport default ShowList;\r\n\r\n","import ShowList from '../Components/ShowList';\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst HomePage =  function HomePage(props) {\n  return (\n    <div>\n      {<ShowList searchKey={props.searchKey} />}\n    </div>\n  );\n}\n\nHomePage.propTypes = {\n  searchKey: PropTypes.string\n};\n\nexport default HomePage;","import React, { useState } from \"react\";\n\n\nexport default function UploadPage(props) {\n  const [tripInfo, setTripInfo] = useState({});\n  const [errorText, setErrorText] = useState(\"\");\n  return (\n    <div class=\"col-4\">\n      <br />\n      <h2 className=\"create-info\">Create a new Trip</h2>\n      {!!errorText && (\n        <div\n          id=\"error\"\n          className=\"alert-danger\"\n          role=\"alert\"\n          style={{ marginBottom: \"4px\" }}\n        >\n          {errorText}\n        </div>\n      )}\n      <form\n        id=\"formCreate\"\n        onSubmit={async (ev) => {\n          ev.preventDefault();\n          const formData = new FormData();\n          Object.entries(tripInfo).forEach(([key, value]) => {\n            formData.append(key, value);\n          });\n          const response = await fetch(\"/createTrip\", {\n            method: \"POST\",\n            credentials: \"same-origin\",\n            body: formData,\n          });\n          const res = await response.json();\n          if (res && res.success) {\n            props.history.push(\"/\");\n          } else {\n            setErrorText(res.message || \"Upload failed!\");\n          }\n        }}\n      >\n        <label class=\"form-label\">\n          Title:{\" \"}\n          <input\n            class=\"form-control\"\n            type=\"text\"\n            onChange={(ev) => {\n              setTripInfo({\n                ...tripInfo,\n                name: ev.target.value,\n              });\n            }}\n          />\n        </label>\n        <br />\n        <label class=\"form-label\">\n          Location:\n          <input\n            class=\"form-control\"\n            type=\"text\"\n            onChange={(ev) => {\n              setTripInfo({\n                ...tripInfo,\n                location: ev.target.value,\n              });\n            }}\n          />\n        </label>\n        <label class=\"form-label\">\n          Description:\n          <br></br>\n          <textarea\n            rows=\"5\"\n            cols=\"50\"\n            onChange={(ev) => {\n              setTripInfo({\n                ...tripInfo,\n                content: ev.target.value,\n              });\n            }}\n          ></textarea>\n        </label>\n        <label class=\"form-label\">\n          Photo:{\" \"}\n          <input\n            class=\"form-control\"\n            type=\"file\"\n            id=\"image-upload\"\n            onChange={(ev) => {\n              setTripInfo({\n                ...tripInfo,\n                image: ev.target.files && ev.target.files[0],\n              });\n            }}\n          />\n        </label>\n        <br />\n        <button type=\"submit\" class=\"btn btn-primary\">\n          Create\n        </button>\n      </form>\n    </div>\n  );\n}\n\n","import React, {useState} from 'react';\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./Authen.css\";\nimport PropTypes from \"prop-types\";\n\nconst LoginPage = function LoginPage(props) {\n  const [userInfo, setUserInfo] = useState({});\n  const [errorText, setErrorText] = useState(\"\");\n  return (\n    <div className = \"/login\">\n      <div className=\"title\"><h3>Sign in to upload posts and save your favourite posts.</h3></div>\n      \n      <div className=\"row\">\n        <div className=\"col-sm-4 box border\">\n          <form id=\"formLogin\" onSubmit = {async (ev) => {\n            ev.preventDefault();\n            if(!userInfo.username || !userInfo.password) {\n              setErrorText(\"Username and password required!\");\n              return;\n            }\n            setErrorText(\"\");\n            const response = await fetch(\"/login\", { // 等待服务端返回\n              method: \"POST\", \n              credentials: \"same-origin\", \n              headers: {\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify(userInfo), \n            });\n            const res = await response.json(); //服务端传递的数据\n\n            if (res && res.success) {\n              props.onLogin && props.onLogin();\n              props.history.push(\"/\");\n            } else {\n              setErrorText (res.message || \"Sign in failed!\");\n            }\n          }}>\n            \n            <div className=\"mb-2\">\n              <label for=\"InputUsername\" className=\"form-label\">Username</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange = {(ev) => {\n                  setUserInfo({\n                    ...userInfo,\n                    username: ev.target.value\n                  });\n                }}\n              />\n\n            </div>\n            <div className=\"mb-3\">\n              <label for=\"InputPassword\" className=\"form-label\">Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                onChange = {(ev) => {\n                  setUserInfo({\n                    ...userInfo,\n                    password: ev.target.value\n                  });\n                }}\n              />\n            </div>\n\n            {!!errorText && <div\n              id=\"error\"\n              className=\"alert-danger\"\n              role=\"alert\"\n              style={{marginBottom: \"4px\",}}\n            >{errorText}</div>}\n\n            <div className=\"d-grid gap-2 mx-auto center-font\">\n              <button type=\"submit\" className=\"btn btn-primary\">Sign In</button>\n            </div>\n          </form>\n          <hr />\n          <div className=\"center-font\">\n            <Link\n              className=\"btn btn-success secondfont\"\n              to=\"/regist\"\n              role=\"button\"\n              >Creat New Account</Link>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n  );\n}\n\nLoginPage.propTypes = {\n  onLogin: PropTypes.func\n};\n\nexport default withRouter(LoginPage);\n\n","import React, {useState} from 'react';\nimport { Link } from \"react-router-dom\";\nimport \"./Authen.css\";\n\nexport default function RegistPage(props) {\n  const [userInfo, setUserInfo] = useState({});\n  const [errorText, setErrorText] = useState(\"\");\n  return (\n    <div className=\"/regist\">\n      <div className=\"title\"><h3>Create New Account</h3></div>\n      <div className=\"row\">\n        <div className=\"col-sm-4 box border\">\n          <form id=\"formRegist\" onSubmit={async (ev) => {\n            ev.preventDefault();\n            if (!userInfo.username || !userInfo.password) {\n              setErrorText(\"Username and password required!\");\n              return;\n            }\n            setErrorText(\"\");\n            const response = await fetch(\"/regist\", {\n              method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n              credentials: \"same-origin\", // include, *same-origin, omit\n              headers: {\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify(userInfo), // body data type must match \"Content-Type\" header\n            });\n            const res = await response.json();\n            if (res && res.success) {\n              props.history.push('/login');\n            } else {\n              setErrorText( res.message || \"Sign up failed!\");\n            }\n          }}>\n            <div className=\"mb-2\">\n              <label for=\"InputUsername\" className=\"form-label\">Username</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(ev) => {\n                  setUserInfo({\n                    ...userInfo,\n                    username: ev.target.value\n                  });\n                }}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label for=\"InputPassword\" className=\"form-label\">Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                onChange={(ev) => {\n                  setUserInfo({\n                    ...userInfo,\n                    password: ev.target.value\n                  });\n                }}\n              />\n            </div>\n            {!!errorText && <div\n              id=\"error\"\n              className=\"alert-danger\"\n              role=\"alert\"\n              style={{marginBottom: \"4px\",}}\n            >{errorText}</div>}\n            <div className=\"d-grid gap-2 mx-auto center-font\">\n              <button type=\"submit\" className=\"btn btn-success\">Sign Up</button>\n            </div>\n          </form>\n          <hr />\n          <div className=\"center-font\">\n            <p className=\"secondfont\">Already have an account?</p>\n            <Link\n              className=\"btn btn-primary secondfont\"\n              to=\"/login\"\n              role=\"button\"\n              >Sign In</Link>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  );\n}\n\n  ","import React, { useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\n\nconst SearchComponent = function SearchComponent(props) {\n  const [searchKey, setSearchKey] = useState(\"\");\n\n  return (\n    <form className=\"d-flex\">\n      <input\n        className=\"form-control me-2\"\n        type=\"search\"\n        placeholder=\"Search\"\n        aria-label=\"Search\"\n        onChange={(ev) => {\n          setSearchKey(ev.target.value);\n        }}\n      />\n      <button\n        className=\"btn btn-outline-success\"\n        onClick={(ev) => {\n          ev.preventDefault();\n          props.onSearch && props.onSearch(searchKey);\n        }}\n      >\n        Search\n      </button>\n    </form>\n\n    );\n};\n\nSearchComponent.propTypes = {\n    onSearch: PropTypes.func\n};\n\nexport default withRouter(SearchComponent);","import React from \"react\";\r\nimport { Link, useLocation, withRouter } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport SearchComponent from \"../Components/SearchComponent\";\r\n\r\nconst Nav = function NavigationComponent(props) {\r\n  const location = useLocation();\r\n  console.log(\"Render NavigationComponent\", location);\r\n\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n      <div className=\"container-fluid\">\r\n        <Link\r\n          className=\"navbar-brand\"\r\n          to=\"/\"\r\n          onClick={async (ev) => {\r\n            ev.preventDefault();\r\n            props.onSearch(\"\");\r\n            props.history.push(\"/\");\r\n          }}\r\n        >\r\n          Bay Area Trip Guide\r\n        </Link>\r\n        <button\r\n          className=\"navbar-toggler\"\r\n          type=\"button\"\r\n          data-bs-toggle=\"collapse\"\r\n          data-bs-target=\"#navbarSupportedContent\"\r\n          aria-controls=\"navbarSupportedContent\"\r\n          aria-expanded=\"false\"\r\n          aria-label=\"Toggle navigation\"\r\n        >\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n            <li className=\"nav-item\">\r\n              <Link\r\n                className={\r\n                  \"nav-link\" + (location.pathname === \"/\" ? \" active\" : \"\")\r\n                }\r\n                aria-current=\"page\"\r\n                \r\n                onClick={async (ev) => {\r\n                  ev.preventDefault();\r\n                  props.onSearch(\"\");\r\n                  props.history.push(\"/\");\r\n                }}\r\n                to=\"/list\"\r\n              >\r\n                List\r\n              </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n              <Link\r\n                className={\r\n                  \"nav-link\" +\r\n                  (location.pathname === \"/upload\" ? \" active\" : \"\")\r\n                }\r\n                to=\"/upload\"\r\n              >\r\n                Upload\r\n              </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <Link className=\"nav-link\" to=\"/\">\r\n                Link\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n\r\n          <SearchComponent onSearch={props.onSearch} />\r\n\r\n          <div\r\n            className=\"btn btn-success\"\r\n            type=\"submit\"\r\n            role=\"button\"\r\n            style={{ marginLeft: \"30px\" }}\r\n            onClick={async (ev) => {\r\n              ev.preventDefault();\r\n              const { hasLogin, onLogout } = props;\r\n              if (hasLogin) {\r\n                onLogout && onLogout();\r\n              } else {\r\n                props.history.replace(\"/login\");\r\n              }\r\n            }}\r\n          >\r\n            {props.hasLogin ? \"Logout\" : \"Sign In\"}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nNav.propTypes = {\r\n  hasLogin: PropTypes.bool,\r\n  onLogout: PropTypes.func,\r\n};\r\n\r\nexport default withRouter(Nav);\r\n","import React, {useEffect, useState} from \"react\";\nimport \"./App.css\";\nimport ShowSaved from \"./Components/ShowSaved\";\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport HomePage from \"./Pages/HomePage.js\";\nimport UploadPage from \"./Pages/UploadPage.js\";\nimport LoginPage from \"./Pages/LoginPage.js\";\nimport RegistPage from \"./Pages/RegistPage.js\";\nimport NavigationComponent from \"./Components/NavigationComponent.js\";\n\nfunction App() {\n  const [hasLogin, setLogin] = useState(false);\n  const [searchKey, setSearchKey] = useState('');\n  useEffect(() => {\n    const checkLogin = async () => {\n      const response = await fetch(\"/checkSession\");\n      const res = await response.json();\n\n      if (res && res.success) {\n        setLogin(true);\n      } else {\n        setLogin(false);\n      }\n    }\n    checkLogin();\n  }, []);  \n  return (\n    <Router>\n      <NavigationComponent hasLogin={hasLogin} onLogout={async () => {\n         const response = await fetch(\"/checkSession\");\n         const res = await response.json();\n   \n         if (res && res.success) {\n           setLogin(false);\n         }\n      }} onSearch={(key) => {\n        setSearchKey(key);\n      }}></NavigationComponent>\n      <div className=\"container\">\n        <Switch> \n          <Route path=\"/login\">\n            <LoginPage onLogin={() => {\n              setLogin(true);\n            }}/>\n          </Route>\n          <Route path=\"/regist\" component={RegistPage}/>\n          <Route path=\"/upload\" component={UploadPage}/>\n          <Route path=\"/saved\" component={ShowSaved}>\n            <HomePage searchKey={searchKey}/>\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}