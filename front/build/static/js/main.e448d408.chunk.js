(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{18:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(20),r=n.n(s),o=(n(26),n(3)),i=n.n(o),l=n(7),j=n(6),b=(n(28),n(10)),u=n(2),d=n(0);var h=function(e){return Object(d.jsxs)("div",{className:"col",children:[Object(d.jsx)("h1",{children:"Find your favorite trips!"}),(e.trips||[]).map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:e.name}),Object(d.jsx)("img",{src:e.img}),Object(d.jsx)("p",{children:e.location}),Object(d.jsx)("p",{children:e.content})]})}))]})},O=function(e){var t=Object(a.useState)([]),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){(function(){var t=Object(l.a)(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/getTrips?searchKey=".concat(e.searchKey));case 2:return n=t.sent,t.next=5,n.json();case 5:(a=t.sent)&&a.success&&s(a.trips);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.searchKey]),Object(d.jsx)(h,{trips:c})},m=function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(O,{searchKey:e.searchKey})})},p=n(5);function f(e){var t=Object(a.useState)({}),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),o=Object(j.a)(r,2),b=o[0],u=o[1];return Object(d.jsxs)("div",{class:"col-4",children:[Object(d.jsx)("br",{}),Object(d.jsx)("h2",{className:"create-info",children:"Create a new Trip"}),!!b&&Object(d.jsx)("div",{id:"error",className:"alert-danger",role:"alert",style:{marginBottom:"4px"},children:b}),Object(d.jsxs)("form",{id:"formCreate",onSubmit:function(){var t=Object(l.a)(i.a.mark((function t(n){var a,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=new FormData,Object.entries(c).forEach((function(e){var t=Object(j.a)(e,2),n=t[0],c=t[1];a.append(n,c)})),t.next=5,fetch("/createTrip",{method:"POST",credentials:"same-origin",body:a});case 5:return s=t.sent,t.next=8,s.json();case 8:(r=t.sent)&&r.success?e.history.push("/"):u(r.message||"Upload failed!");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(d.jsxs)("label",{class:"form-label",children:["Title:"," ",Object(d.jsx)("input",{class:"form-control",type:"text",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{name:e.target.value}))}})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("label",{class:"form-label",children:["Location:",Object(d.jsx)("input",{class:"form-control",type:"text",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{location:e.target.value}))}})]}),Object(d.jsxs)("label",{class:"form-label",children:["Description:",Object(d.jsx)("br",{}),Object(d.jsx)("textarea",{rows:"5",cols:"50",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{content:e.target.value}))}})]}),Object(d.jsxs)("label",{class:"form-label",children:["Photo:"," ",Object(d.jsx)("input",{class:"form-control",type:"file",id:"image-upload",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{image:e.target.files&&e.target.files[0]}))}})]}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",class:"btn btn-primary",children:"Create"})]})]})}n(18);var x=Object(u.g)((function(e){var t=Object(a.useState)({}),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),o=Object(j.a)(r,2),u=o[0],h=o[1];return Object(d.jsxs)("div",{className:"/login",children:[Object(d.jsx)("div",{className:"title",children:Object(d.jsx)("h3",{children:"Sign in to upload posts and save your favourite posts."})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-4 box border",children:[Object(d.jsxs)("form",{id:"formLogin",onSubmit:function(){var t=Object(l.a)(i.a.mark((function t(n){var a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c.username&&c.password){t.next=4;break}return h("Username and password required!"),t.abrupt("return");case 4:return h(""),t.next=7,fetch("/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 7:return a=t.sent,t.next=10,a.json();case 10:(s=t.sent)&&s.success?(e.onLogin&&e.onLogin(),e.history.push("/")):h(s.message||"Sign in failed!");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)("label",{for:"InputUsername",className:"form-label",children:"Username"}),Object(d.jsx)("input",{type:"text",className:"form-control",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{username:e.target.value}))}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{for:"InputPassword",className:"form-label",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{password:e.target.value}))}})]}),!!u&&Object(d.jsx)("div",{id:"error",className:"alert-danger",role:"alert",style:{marginBottom:"4px"},children:u}),Object(d.jsx)("div",{className:"d-grid gap-2 mx-auto center-font",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign In"})})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"center-font",children:Object(d.jsx)(b.b,{className:"btn btn-success secondfont",to:"/regist",role:"button",children:"Creat New Account"})})]})})]})}));function v(e){var t=Object(a.useState)({}),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),o=Object(j.a)(r,2),u=o[0],h=o[1];return Object(d.jsxs)("div",{className:"/regist",children:[Object(d.jsx)("div",{className:"title",children:Object(d.jsx)("h3",{children:"Create New Account"})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-4 box border",children:[Object(d.jsxs)("form",{id:"formRegist",onSubmit:function(){var t=Object(l.a)(i.a.mark((function t(n){var a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c.username&&c.password){t.next=4;break}return h("Username and password required!"),t.abrupt("return");case 4:return h(""),t.next=7,fetch("/regist",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 7:return a=t.sent,t.next=10,a.json();case 10:(s=t.sent)&&s.success?e.history.push("/login"):h(s.message||"Sign up failed!");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)("label",{for:"InputUsername",className:"form-label",children:"Username"}),Object(d.jsx)("input",{type:"text",className:"form-control",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{username:e.target.value}))}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{for:"InputPassword",className:"form-label",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",onChange:function(e){s(Object(p.a)(Object(p.a)({},c),{},{password:e.target.value}))}})]}),!!u&&Object(d.jsx)("div",{id:"error",className:"alert-danger",role:"alert",style:{marginBottom:"4px"},children:u}),Object(d.jsx)("div",{className:"d-grid gap-2 mx-auto center-font",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-success",children:"Sign Up"})})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"center-font",children:[Object(d.jsx)("p",{className:"secondfont",children:"Already have an account?"}),Object(d.jsx)(b.b,{className:"btn btn-primary secondfont",to:"/login",role:"button",children:"Sign In"})]})]})})]})}var g=Object(u.g)((function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],s=n[1];return Object(d.jsxs)("form",{className:"d-flex",children:[Object(d.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(e){s(e.target.value)}}),Object(d.jsx)("button",{className:"btn btn-outline-success",onClick:function(t){t.preventDefault(),e.onSearch&&e.onSearch(c)},children:"Search"})]})})),N=Object(u.g)((function(e){var t=Object(u.f)();return console.log("Render NavigationComponent",t),Object(d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)(b.b,{className:"navbar-brand",to:"/",children:"Bay Area Trip Guide"}),Object(d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(d.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(b.b,{className:"nav-link"+("/"===t.pathname?" active":""),"aria-current":"page",to:"/",children:"List"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(b.b,{className:"nav-link"+("/upload"===t.pathname?" active":""),to:"/upload",children:"Upload"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(b.b,{className:"nav-link",href:"#",children:"Link"})})]}),Object(d.jsx)(g,{onSearch:e.onSearch}),Object(d.jsx)("div",{className:"btn btn-success",type:"submit",role:"button",style:{marginLeft:"30px"},onClick:function(){var t=Object(l.a)(i.a.mark((function t(n){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),a=e.hasLogin,c=e.onLogout,a?c&&c():e.history.replace("/login");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:e.hasLogin?"Logout":"Sign In"})]})]})})}));var y=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),r=Object(j.a)(s,2),o=r[0],h=r[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/checkSession");case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent)&&n.success?c(!0):c(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(d.jsxs)(b.a,{children:[Object(d.jsx)(N,{hasLogin:n,onLogout:Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/checkSession");case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent)&&n.success&&c(!1);case 7:case"end":return e.stop()}}),e)}))),onSearch:function(e){h(e)}}),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{path:"/login",children:Object(d.jsx)(x,{onLogin:function(){c(!0)}})}),Object(d.jsx)(u.a,{path:"/regist",component:v}),Object(d.jsx)(u.a,{path:"/upload",component:f}),Object(d.jsx)(u.a,{path:"/",children:Object(d.jsx)(m,{searchKey:o})})]})})]})};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e448d408.chunk.js.map